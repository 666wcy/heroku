{"version":3,"sources":["App.js","pages/Browse/Browse.js","pages/Browse/CategoryBrowse.js","components/Footer.js","components/Gallery.js","pages/Login/Login.js","components/Logout.js","components/Nav.js","components/PageMenu.js","theme.js","pages/Search/Search.js","pages/Settings/Settings.js","pages/Settings/SettingsLoginForm.js","functions/uuid.js","pages/View/View.js","index.js"],"names":["App","props","state","auth","sessionStorage","getItem","localStorage","isLoaded","server","to","Component","Browse","metadata","this","url","axios","get","then","response","setState","data","catch","error","console","history","push","status","Swal","fire","title","text","icon","confirmButtonText","result","isConfirmed","cancelButtonText","showCancelButton","isDenied","location","reload","request","isDismissed","className","color","size","CategoryBrowse","category","match","params","page","parseInt","queryString","parse","search","range","undefined","sort","pages","Math","ceil","PageMenu","thisprops","SortMenu","React","useState","menuAnchorEl","setMenuAnchorEl","Button","aria-controls","aria-haspopup","onClick","event","currentTarget","variant","Menu","id","anchorEl","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","open","Boolean","onClose","MenuItem","pathname","uuid","styles","makeStyles","theme","footer__container","backgroundColor","palette","background","paper","width","height","display","alignItems","justifyContent","Footer","classes","href","target","src","Gallery","length","map","categoryInfo","name","children","item","posterPath","alt","Typography","Login","password","tempServer","window","origin","username","handleTempServerChange","bind","handlePassChange","handleUserChange","handleSubmit","dismissError","evt","preventDefault","setItem","value","Container","component","maxWidth","CssBaseline","Avatar","avatar","form","onSubmit","noValidate","style","data-test","TextField","margin","required","fullWidth","label","autoComplete","onChange","autoFocus","type","submit","withStyles","marginTop","spacing","flexDirection","secondary","main","withTheme","Logout","clear","setTimeout","Nav","accounts","categories","account_list","category_list","NavUI","root","primary","grow","flexGrow","breakpoints","up","position","borderRadius","shape","fade","common","marginRight","marginLeft","searchIcon","padding","pointerEvents","inputRoot","inputInput","paddingLeft","transition","transitions","create","browse","setSearch","AppBar","Toolbar","noWrap","hash","InputBase","placeholder","input","inputProps","BrowseMenu","ThemeMenu","AccountMenu","handleClose","Divider","light","pic","includes","IconButton","aria-label","Pagination","count","renderItem","PaginationItem","Search","query","q","Settings","secret","handleAccessTokenChange","handleClientIDChange","handleClientSecretChange","handleRefreshTokenChange","handleCategoryTypeChange","handleCategoryNameChange","handleCategoryIdChange","handleCategoryDriveIdChange","handleAddCategory","handleRemoveCategory","handleAccountUsernameChange","handleAccountPasswordChange","handleAccountPicChange","handleAddAccount","handleRemoveAccount","handleSecretChange","handleTMDBAPIKeyChange","handleCloudflareChange","handleBuildIntervalChange","handleRestart","config","postConfig","tempSecret","secret_key","removeItem","post","configCopy","access_token","client_id","client_secret","refresh_token","split","n","driveId","splice","chars","i","charAt","floor","random","tmdb_api_key","cloudflare","build_interval","Form","token_expiry","disabled","select","account","textAlign","SettingsLoginForm","lightTheme","createMuiTheme","warning","success","default","darkTheme","draculaTheme","nordDark","nordLight","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","View","loadedTime","Date","exitTime","diffTime","abs","watchList","JSON","shift","stringify","MovieView","TVBView","TVSView","source","poster","sources","options","controls","overview","Rating","voteAverage","max","readOnly","PlayerMenu","ChildrenMenu","isHash","class","child","marginBottom","navigator","clipboard","writeText","ReactDOM","render","ThemeProvider","exact","path","document","getElementById"],"mappings":"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","file":"static/js/main.b19de2c8.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      isLoaded: false,\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return <Redirect to=\"/browse\" />;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { Footer, Gallery, Nav } from \"../../components\";\r\n\r\nexport default class Browse extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      isLoaded: false,\r\n      metadata: {},\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, server } = this.state;\r\n    let url = `${server}/api/v1/metadata?a=${auth}&r=0:16&s=popularity-des`;\r\n\r\n    axios\r\n      .get(url)\r\n      .then((response) =>\r\n        this.setState({\r\n          isLoaded: true,\r\n          metadata: response.data,\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let { isLoaded, metadata } = this.state;\r\n\r\n    return isLoaded ? (\r\n      <div className=\"Browse\">\r\n        <Nav />\r\n        <Gallery metadata={metadata} />\r\n        <Footer />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Button, Menu, MenuItem } from \"@material-ui/core\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\n\r\nimport { Footer, Gallery, Nav, PageMenu, uuid } from \"../../components\";\r\nimport \"../../components/SortMenu.css\";\r\n\r\nexport default class CategoryBrowse extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      category: this.props.match.params.category,\r\n      isLoaded: false,\r\n      metadata: {},\r\n      page: parseInt(queryString.parse(this.props.location.search).page) || 1,\r\n      range: `${\r\n        queryString.parse(this.props.location.search).page === undefined\r\n          ? \"0:16\"\r\n          : `${\r\n              (parseInt(queryString.parse(this.props.location.search).page) -\r\n                1) *\r\n              16\r\n            }:${\r\n              parseInt(queryString.parse(this.props.location.search).page) * 16\r\n            }`\r\n      }`,\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n      sort:\r\n        queryString.parse(this.props.location.search).sort || \"alphabet-asc\",\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, category, range, server, sort } = this.state;\r\n    let url = `${server}/api/v1/metadata?a=${auth}&c=${category}&r=${range}&s=${sort}`;\r\n\r\n    axios\r\n      .get(url)\r\n      .then((response) =>\r\n        this.setState({\r\n          isLoaded: true,\r\n          metadata: response.data,\r\n          pages: Math.ceil(response.data[0][\"length\"] / 16),\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let { isLoaded, metadata, page, pages } = this.state;\r\n\r\n    return isLoaded ? (\r\n      <div className=\"CategoryBrowse\">\r\n        <Nav />\r\n        <Gallery metadata={metadata} />\r\n        <PageMenu props={{ page: page, pages: pages, thisprops: this.props }} />\r\n        <SortMenu props={{ thisprops: this.props }} />\r\n        <Footer />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport function SortMenu(props) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  let { thisprops } = props.props;\r\n\r\n  return (\r\n    <div className=\"SortMenu\">\r\n      <div className=\"sort__container\">\r\n        <Button\r\n          aria-controls=\"sort-menu\"\r\n          aria-haspopup=\"true\"\r\n          onClick={handleClick}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n        >\r\n          Sort\r\n        </Button>\r\n        <Menu\r\n          id=\"sort-menu\"\r\n          anchorEl={menuAnchorEl}\r\n          keepMounted\r\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n          transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n          open={Boolean(menuAnchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=alphabet-asc`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Alphabet Ascending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=alphabet-des`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Alphabet Descending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=date-asc`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Date Ascending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=date-des`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Date Descending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=popularity-asc`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Popularity Ascending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=popularity-des`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Popularity Descending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=vote-asc`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Vote Ascending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=vote-des`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Vote Descending\r\n            </Link>\r\n          </MenuItem>\r\n          <MenuItem>\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?sort=random`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              Random\r\n            </Link>\r\n          </MenuItem>\r\n        </Menu>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport \"./Footer.css\";\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  footer__container: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    width: \"100%\",\r\n    height: \"75px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Footer() {\r\n  const classes = styles();\r\n\r\n  return (\r\n    <footer className={classes.footer__container}>\r\n      <a href=\"https://github.com/libDrive/libDrive\" target=\"_blank\">\r\n        <img\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Font_Awesome_5_brands_github.svg/62px-Font_Awesome_5_brands_github.svg.png\"\r\n          className=\"footer__github\"\r\n          height=\"55px\"\r\n        />\r\n      </a>\r\n      <a\r\n        className=\"no_decoration_link footer__text\"\r\n        href=\"https://eliasbenb.github.io\"\r\n        target=\"_blank\"\r\n      >\r\n        © 2021 Copyright: Elias Benbourenane\r\n      </a>\r\n    </footer>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nimport { uuid } from \"../components\";\r\nimport \"./Gallery.css\";\r\n\r\nexport default class Gallery extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      metadata: this.props.metadata,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let { metadata } = this.state;\r\n\r\n    return (\r\n      <div className=\"Gallery\">\r\n        {metadata.length\r\n          ? metadata.map((category) => (\r\n              <div className=\"category\" key={uuid()}>\r\n                <Link\r\n                  to={`/browse/${category.categoryInfo.name}`}\r\n                  key={uuid()}\r\n                  className=\"category__title no_decoration_link\"\r\n                >\r\n                  {category.categoryInfo.name}\r\n                </Link>\r\n                <div className=\"items\">\r\n                  {category.children.length\r\n                    ? category.children.map((item) => (\r\n                        <figure className=\"item__figure\" key={uuid()}>\r\n                          <Link to={`/view/${item.id}`} key={uuid()}>\r\n                            <img\r\n                              src={item.posterPath}\r\n                              key={uuid()}\r\n                              className=\"item__poster\"\r\n                              alt={item.title}\r\n                            />\r\n                          </Link>\r\n                          <Typography className=\"item__title\" key={uuid()}>\r\n                            {item.title}\r\n                          </Typography>\r\n                        </figure>\r\n                      ))\r\n                    : null}\r\n                </div>\r\n              </div>\r\n            ))\r\n          : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Container,\r\n  CssBaseline,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst styles = (theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n});\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: \"\",\r\n      error: \"\",\r\n      password: \"\",\r\n      server: \"\",\r\n      tempServer: window.location.origin,\r\n      username: \"\",\r\n    };\r\n\r\n    this.handleTempServerChange = this.handleTempServerChange.bind(this);\r\n    this.handlePassChange = this.handlePassChange.bind(this);\r\n    this.handleUserChange = this.handleUserChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.dismissError = this.dismissError.bind(this);\r\n  }\r\n\r\n  dismissError() {\r\n    this.setState({ error: \"\" });\r\n  }\r\n\r\n  handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    let { auth, password, server, tempServer, username } = this.state;\r\n    if (!tempServer) {\r\n      return this.setState({ error: \"Server is required\" });\r\n    }\r\n    if (!username) {\r\n      return this.setState({ error: \"Username is required\" });\r\n    }\r\n    if (!password) {\r\n      return this.setState({ error: \"Password is required\" });\r\n    }\r\n    axios\r\n      .get(`${tempServer}/api/v1/auth?u=${username}&p=${password}`)\r\n      .then((response) =>\r\n        this.setState({\r\n          auth: response.data.auth,\r\n          server: tempServer,\r\n        })\r\n      )\r\n      .then(() => {\r\n        if (auth && server) {\r\n          localStorage.setItem(\"server\", server);\r\n          sessionStorage.setItem(\"server\", server);\r\n          localStorage.setItem(\"auth\", auth);\r\n          sessionStorage.setItem(\"auth\", auth);\r\n          this.props.history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"OK\",\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"OK\",\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${tempServer} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"OK\",\r\n          });\r\n        }\r\n      });\r\n    return this.setState({ error: \"\" });\r\n  }\r\n\r\n  handleTempServerChange(evt) {\r\n    this.setState({\r\n      tempServer: evt.target.value,\r\n    });\r\n  }\r\n\r\n  handleUserChange(evt) {\r\n    this.setState({\r\n      username: evt.target.value,\r\n    });\r\n  }\r\n\r\n  handlePassChange(evt) {\r\n    this.setState({\r\n      password: evt.target.value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { error, password, tempServer, username } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <form\r\n            className={classes.form}\r\n            onSubmit={this.handleSubmit}\r\n            noValidate\r\n          >\r\n            {error && (\r\n              <div style={{}}>\r\n                <h3 data-test=\"error\" onClick={this.dismissError}>\r\n                  <button onClick={this.dismissError}>✖</button>\r\n                  {error}\r\n                </h3>\r\n              </div>\r\n            )}\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"server\"\r\n              label=\"Server\"\r\n              name=\"server\"\r\n              autoComplete=\"server\"\r\n              onChange={this.handleTempServerChange}\r\n              value={tempServer}\r\n              autoFocus\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoComplete=\"username\"\r\n              onChange={this.handleUserChange}\r\n              value={username}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              onChange={this.handlePassChange}\r\n              value={password}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Sign In\r\n            </Button>\r\n          </form>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Login);\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nexport default class Logout extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isLoaded: false };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    localStorage.clear();\r\n    sessionStorage.clear();\r\n    setTimeout(() => this.setState({ isLoaded: true }), 500);\r\n  }\r\n\r\n  render() {\r\n    let { isLoaded } = this.state;\r\n\r\n    return isLoaded ? (\r\n      <Redirect to=\"/login\" />\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component, useState } from \"react\";\r\n\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport {\r\n  AppBar,\r\n  Button,\r\n  Divider,\r\n  InputBase,\r\n  Menu,\r\n  MenuItem,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport Brightness6Icon from \"@material-ui/icons/Brightness6\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { uuid } from \"../components\";\r\n\r\nexport default class Nav extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      accounts: {},\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      categories: {},\r\n      isLoaded: false,\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, server } = this.state;\r\n    let url = `${server}/api/v1/environment?a=${auth}`;\r\n\r\n    axios.get(url).then((response) =>\r\n      this.setState({\r\n        accounts: response.data.account_list,\r\n        categories: response.data.category_list,\r\n        isLoaded: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { accounts, categories, isLoaded } = this.state;\r\n\r\n    return isLoaded ? (\r\n      <div className=\"Nav\">\r\n        <NavUI\r\n          props={{\r\n            categories: categories,\r\n            accounts: accounts,\r\n          }}\r\n        />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\" style={{ display: \"none\" }}></div>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  title: {\r\n    display: \"none\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\",\r\n    },\r\n  },\r\n  search: {\r\n    position: \"relative\",\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.main, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: fade(theme.palette.common.main, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: \"auto\",\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    pointerEvents: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  inputRoot: {\r\n    color: \"inherit\",\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create(\"width\"),\r\n    width: \"100%\",\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      width: \"20ch\",\r\n    },\r\n  },\r\n  browse: {\r\n    marginRight: \"15px\",\r\n  },\r\n}));\r\n\r\nexport function NavUI(props) {\r\n  const classes = styles();\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const searchChange = (evt) => {\r\n    setSearch(evt.target.value);\r\n  };\r\n\r\n  const searchSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    window.location.hash = `#/search/${search}`;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\" className={classes.root}>\r\n        <Toolbar>\r\n          <Link to=\"/\" className=\"no_decoration_link\">\r\n            <Typography className={classes.title} variant=\"h6\" noWrap>\r\n              libDrive\r\n            </Typography>\r\n          </Link>\r\n          <form className={classes.search} onSubmit={searchSubmit}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n              inputProps={{ \"aria-label\": \"search\" }}\r\n              onChange={searchChange}\r\n            />\r\n          </form>\r\n          <div className={classes.grow} />\r\n          <BrowseMenu props={props.props.categories} />\r\n          <ThemeMenu />\r\n          <AccountMenu props={props.props.accounts} />\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function BrowseMenu(props) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n  const classes = styles();\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.browse}>\r\n      <Button\r\n        aria-controls=\"browse-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n      >\r\n        Browse\r\n      </Button>\r\n      <Menu\r\n        id=\"browse-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <Link to={\"/\"} className=\"no_decoration_link\">\r\n          <MenuItem onClick={handleClose}>Home Page</MenuItem>\r\n        </Link>\r\n        <Divider light />\r\n        {props.props.length\r\n          ? props.props.map((category) => (\r\n              <Link\r\n                to={`/browse/${category.name}`}\r\n                key={uuid()}\r\n                className=\"no_decoration_link\"\r\n              >\r\n                <MenuItem onClick={handleClose}>{category.name}</MenuItem>\r\n              </Link>\r\n            ))\r\n          : null}\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AccountMenu(props) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  const handleRebuild = () => {\r\n    let auth = sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\");\r\n    let server =\r\n      sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\");\r\n\r\n    let url = `${server}/api/v1/rebuild?a=${auth}&force=true`;\r\n    axios\r\n      .get(url)\r\n      .then((response) =>\r\n        Swal.fire({\r\n          title: \"Success!\",\r\n          text: \"libDrive's metadata is being rebuilt...\",\r\n          icon: \"success\",\r\n          confirmButtonText: \"OK\",\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  let pic = <AccountCircle />;\r\n  if (props.props.pic.includes(\"http\") || props.props.pic.includes(\"www\")) {\r\n    pic = <img src={props.props.pic} width=\"32px\" alt=\"profile-pic\"></img>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label=\"more\"\r\n        aria-controls=\"account-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n      >\r\n        {pic}\r\n      </IconButton>\r\n      <Menu\r\n        id=\"account-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <Link to={\"/settings\"} className=\"no_decoration_link\">\r\n          <MenuItem onClick={handleClose}>Settings</MenuItem>\r\n        </Link>\r\n        <MenuItem onClick={handleRebuild}>Rebuild</MenuItem>\r\n        <Link to={\"/logout\"} className=\"no_decoration_link\">\r\n          <MenuItem onClick={handleClose}>Logout</MenuItem>\r\n        </Link>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ThemeMenu() {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  const handleLight = () => {\r\n    setMenuAnchorEl(null);\r\n    localStorage.setItem(\"theme\", \"light\");\r\n    sessionStorage.setItem(\"theme\", \"light\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleDark = () => {\r\n    setMenuAnchorEl(null);\r\n    localStorage.setItem(\"theme\", \"dark\");\r\n    sessionStorage.setItem(\"theme\", \"dark\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleDracula = () => {\r\n    setMenuAnchorEl(null);\r\n    localStorage.setItem(\"theme\", \"dracula\");\r\n    sessionStorage.setItem(\"theme\", \"dracula\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleNordDark = () => {\r\n    setMenuAnchorEl(null);\r\n    localStorage.setItem(\"theme\", \"nordDark\");\r\n    sessionStorage.setItem(\"theme\", \"nordDark\");\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleNordLight = () => {\r\n    setMenuAnchorEl(null);\r\n    localStorage.setItem(\"theme\", \"nordLight\");\r\n    sessionStorage.setItem(\"theme\", \"nordLight\");\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-label=\"more\"\r\n        aria-controls=\"theme-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n      >\r\n        <Brightness6Icon />\r\n      </IconButton>\r\n      <Menu\r\n        id=\"theme-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={handleLight}>Light</MenuItem>\r\n        <MenuItem onClick={handleDark}>Dark</MenuItem>\r\n        <MenuItem onClick={handleDracula}>Dracula</MenuItem>\r\n        <MenuItem onClick={handleNordDark}>Nord Dark</MenuItem>\r\n        <MenuItem onClick={handleNordLight}>Nord Light</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport { Pagination, PaginationItem } from \"@material-ui/lab\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport queryString from \"query-string\";\r\n\r\nimport { uuid } from \"../components\";\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& > *\": {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      margin: theme.spacing(4),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PageMenu(props) {\r\n  let { page, pages, thisprops } = props.props;\r\n  const classes = styles();\r\n\r\n  if (page > pages) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: thisprops.location.pathname,\r\n          search: `?page=${pages}&sort=${\r\n            queryString.parse(thisprops.location.search).sort\r\n          }`,\r\n        }}\r\n      />\r\n    );\r\n  } else {\r\n    return (\r\n      <div className={classes.root}>\r\n        <Pagination\r\n          page={page}\r\n          count={pages}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          renderItem={(item) => (\r\n            <Link\r\n              to={{\r\n                pathname: thisprops.location.pathname,\r\n                search: `?page=${item.page}&sort=${\r\n                  queryString.parse(thisprops.location.search).sort\r\n                }`,\r\n              }}\r\n              key={uuid()}\r\n              className=\"no_decoration_link\"\r\n            >\r\n              <PaginationItem {...item} />\r\n            </Link>\r\n          )}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nconst lightTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"#4197fe\",\r\n    },\r\n    secondary: {\r\n      main: \"#68a0e5\",\r\n    },\r\n    error: {\r\n      main: \"#d32f2f\",\r\n    },\r\n    warning: {\r\n      main: \"#ff9800\",\r\n    },\r\n    success: {\r\n      main: \"#4caf50\",\r\n    },\r\n    background: {\r\n      default: \"#fafafa\",\r\n      paper: \"#e8e8e8\",\r\n    },\r\n    text: {\r\n      primary: \"#0f0f0f\",\r\n    },\r\n    common: {\r\n      main: \"#000000\",\r\n    },\r\n  },\r\n});\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"#4197fe\",\r\n    },\r\n    secondary: {\r\n      main: \"#68a0e5\",\r\n    },\r\n    error: {\r\n      main: \"#d32f2f\",\r\n    },\r\n    warning: {\r\n      main: \"#ff9800\",\r\n    },\r\n    success: {\r\n      main: \"#4caf50\",\r\n    },\r\n    background: {\r\n      default: \"#111111\",\r\n      paper: \"#1f1f1f\",\r\n    },\r\n    common: {\r\n      main: \"#ffffff\",\r\n    },\r\n  },\r\n});\r\n\r\nconst draculaTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"#6272a4\",\r\n    },\r\n    secondary: {\r\n      main: \"#44475a\",\r\n    },\r\n    error: {\r\n      main: \"#ffb86c\",\r\n    },\r\n    warning: {\r\n      main: \"#ff5555\",\r\n    },\r\n    success: {\r\n      main: \"#50fa7b\",\r\n    },\r\n    background: {\r\n      default: \"#282a36\",\r\n      paper: \"#242630\",\r\n    },\r\n    text: {\r\n      primary: \"#f8f8f2\",\r\n    },\r\n    common: {\r\n      main: \"#6272a4\",\r\n    },\r\n  },\r\n});\r\n\r\nconst nordDark = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"#5E81AC\",\r\n    },\r\n    secondary: {\r\n      main: \"#88C0D0\",\r\n    },\r\n    error: {\r\n      main: \"#BF616A\",\r\n    },\r\n    warning: {\r\n      main: \"#EBCB8B\",\r\n    },\r\n    success: {\r\n      main: \"#A3BE8C\",\r\n    },\r\n    background: {\r\n      default: \"#2E3440\",\r\n      paper: \"#3B4252\",\r\n    },\r\n    text: {\r\n      primary: \"#ECEFF4\",\r\n    },\r\n    common: {\r\n      main: \"#81A1C1\",\r\n    },\r\n  },\r\n});\r\n\r\nconst nordLight = createMuiTheme({\r\n  palette: {\r\n    type: \"light\",\r\n    primary: {\r\n      main: \"#5E81AC\",\r\n    },\r\n    secondary: {\r\n      main: \"#88C0D0\",\r\n    },\r\n    error: {\r\n      main: \"#BF616A\",\r\n    },\r\n    warning: {\r\n      main: \"#EBCB8B\",\r\n    },\r\n    success: {\r\n      main: \"#A3BE8C\",\r\n    },\r\n    background: {\r\n      default: \"#E5E9F0\",\r\n      paper: \"#D8DEE9\",\r\n    },\r\n    text: {\r\n      primary: \"#2E3440\",\r\n    },\r\n    common: {\r\n      main: \"#5E81AC\",\r\n    },\r\n  },\r\n});\r\n\r\nvar theme;\r\n\r\nif (\r\n  localStorage.getItem(\"theme\") === \"light\" ||\r\n  sessionStorage.getItem(\"theme\") === \"light\"\r\n) {\r\n  theme = lightTheme;\r\n} else if (\r\n  localStorage.getItem(\"theme\") === \"dark\" ||\r\n  sessionStorage.getItem(\"theme\") === \"dark\"\r\n) {\r\n  theme = darkTheme;\r\n} else if (\r\n  localStorage.getItem(\"theme\") === \"dracula\" ||\r\n  sessionStorage.getItem(\"theme\") === \"dracula\"\r\n) {\r\n  theme = draculaTheme;\r\n} else if (\r\n  localStorage.getItem(\"theme\") === \"nordDark\" ||\r\n  sessionStorage.getItem(\"theme\") === \"nordDark\"\r\n) {\r\n  theme = nordDark;\r\n} else if (\r\n  localStorage.getItem(\"theme\") === \"nordLight\" ||\r\n  sessionStorage.getItem(\"theme\") === \"nordLight\"\r\n) {\r\n  theme = nordLight;\r\n} else {\r\n  theme = darkTheme;\r\n  localStorage.setItem(\"theme\", \"dark\");\r\n  sessionStorage.setItem(\"theme\", \"dark\");\r\n}\r\n\r\nexport default theme;\r\n","import React, { Component } from \"react\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { Footer, Gallery, Nav } from \"../../components\";\r\n\r\nexport default class Search extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      isLoaded: false,\r\n      metadata: [],\r\n      query: this.props.match.params.q,\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, query, server } = this.state;\r\n    let url = `${server}/api/v1/metadata?a=${auth}&q=${query}`;\r\n\r\n    axios\r\n      .get(url)\r\n      .then((response) =>\r\n        this.setState({\r\n          isLoaded: true,\r\n          metadata: response.data,\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let { isLoaded, metadata } = this.state;\r\n\r\n    return isLoaded ? (\r\n      <div className=\"Search\">\r\n        <Nav />\r\n        <Gallery metadata={metadata} />\r\n        <Footer />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  MenuItem,\r\n  Typography,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport RemoveCircleOutlineIcon from '@material-ui/icons/RemoveCircleOutline';\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { Footer, Nav, uuid } from \"../../components\";\r\n\r\nconst styles = (theme) => ({\r\n  Form: {\r\n    textAlign: \"center\",\r\n    \"& .MuiTextField-root\": {\r\n      width: \"30ch\",\r\n      margin: theme.spacing(1),\r\n      textAlign: \"left\",\r\n    },\r\n    \"& .MuiTypography-root\": {\r\n      margin: \"30px 30px\",\r\n    },\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(4, 0, 2),\r\n    width: \"20ch\",\r\n  },\r\n});\r\n\r\nexport class Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      error: \"\",\r\n      isLoaded: false,\r\n      secret: sessionStorage.getItem(\"secret\"),\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n\r\n    this.handleAccessTokenChange = this.handleAccessTokenChange.bind(this);\r\n    this.handleClientIDChange = this.handleClientIDChange.bind(this);\r\n    this.handleClientSecretChange = this.handleClientSecretChange.bind(this);\r\n    this.handleRefreshTokenChange = this.handleRefreshTokenChange.bind(this);\r\n    this.handleCategoryTypeChange = this.handleCategoryTypeChange.bind(this);\r\n    this.handleCategoryNameChange = this.handleCategoryNameChange.bind(this);\r\n    this.handleCategoryIdChange = this.handleCategoryIdChange.bind(this);\r\n    this.handleCategoryDriveIdChange = this.handleCategoryDriveIdChange.bind(\r\n      this\r\n    );\r\n    this.handleAddCategory = this.handleAddCategory.bind(this);\r\n    this.handleRemoveCategory = this.handleRemoveCategory.bind(this);\r\n    this.handleAccountUsernameChange = this.handleAccountUsernameChange.bind(\r\n      this\r\n    );\r\n    this.handleAccountPasswordChange = this.handleAccountPasswordChange.bind(\r\n      this\r\n    );\r\n    this.handleAccountPicChange = this.handleAccountPicChange.bind(this);\r\n    this.handleAddAccount = this.handleAddAccount.bind(this);\r\n    this.handleRemoveAccount = this.handleRemoveAccount.bind(this);\r\n    this.handleSecretChange = this.handleSecretChange.bind(this);\r\n    this.handleTMDBAPIKeyChange = this.handleTMDBAPIKeyChange.bind(this);\r\n    this.handleCloudflareChange = this.handleCloudflareChange.bind(this);\r\n    this.handleBuildIntervalChange = this.handleBuildIntervalChange.bind(this);\r\n    this.dismissError = this.dismissError.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleRestart = this.handleRestart.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, secret, server } = this.state;\r\n\r\n    axios\r\n      .get(`${server}/api/v1/config?secret=${secret}`)\r\n      .then((response) =>\r\n        this.setState({\r\n          config: response.data,\r\n          isLoaded: true,\r\n          postConfig: response.data,\r\n          tempSecret: response.data.secret_key,\r\n        })\r\n      )\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Login\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                sessionStorage.removeItem(\"secret\");\r\n                this.props.history.push(\"/settings/login\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  dismissError() {\r\n    this.setState({ error: \"\" });\r\n  }\r\n\r\n  handleRestart(evt) {\r\n    evt.preventDefault();\r\n    let { secret, server } = this.state;\r\n\r\n    axios\r\n      .get(`${server}/api/v1/restart?secret=${secret}`)\r\n      .then((response) => {\r\n        Swal.fire({\r\n          title: \"Success!\",\r\n          text:\r\n            \"libDrive is being restarted, this might take some time, so the app won't load\",\r\n          icon: \"success\",\r\n          confirmButtonText: \"OK\",\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        Swal.fire({\r\n          title: \"Success!\",\r\n          text:\r\n            \"libDrive is being restarted, this might take some time, so the app won't load\",\r\n          icon: \"success\",\r\n          confirmButtonText: \"OK\",\r\n        });\r\n      });\r\n  }\r\n\r\n  handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    let { secret, server } = this.state;\r\n\r\n    axios\r\n      .post(`${server}/api/v1/config?secret=${secret}`, this.state.postConfig)\r\n      .then((response) => {\r\n        Swal.fire({\r\n          title: \"Success!\",\r\n          text:\r\n            \"The config has been updated on the backend! The backend might need to be restarted for some changes to take effect.\",\r\n          icon: \"success\",\r\n          confirmButtonText: \"OK\",\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                sessionStorage.removeItem(\"secret\");\r\n                this.props.history.push(\"/settings/login\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleAccessTokenChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.access_token = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleClientIDChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.client_id = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleClientSecretChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.client_secret = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleRefreshTokenChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.refresh_token = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleCategoryTypeChange(evt) {\r\n    var value = evt.target.value.split(\"_\")[0];\r\n    var n = evt.target.value.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list[n].type = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleCategoryNameChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list[n].name = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleCategoryIdChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list[n].id = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleCategoryDriveIdChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list[n].driveId = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleAddCategory(evt) {\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list.push({ type: \"\", name: \"\", id: \"\", driveId: \"\" });\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleRemoveCategory(evt) {\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.category_list.splice(n, 1);\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleAccountUsernameChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.account_list[n].username = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleAccountPasswordChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.account_list[n].password = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleAccountPicChange(evt) {\r\n    var value = evt.target.value;\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.account_list[n].pic = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleAddAccount(evt) {\r\n    var configCopy = this.state.postConfig;\r\n\r\n    var text = \"\";\r\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\r\n    for (var i = 0; i < 32; i++) {\r\n      text += chars.charAt(Math.floor(Math.random() * chars.length));\r\n    }\r\n\r\n    configCopy.account_list.push({\r\n      username: \"\",\r\n      password: \"\",\r\n      pic: \"\",\r\n      auth: text,\r\n    });\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleRemoveAccount(evt) {\r\n    var n = evt.target.id.split(\"_\")[1];\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.account_list.splice(n, 1);\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleSecretChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.secret_key = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleTMDBAPIKeyChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.tmdb_api_key = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleCloudflareChange(evt) {\r\n    var value = evt.target.value;\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.cloudflare = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  handleBuildIntervalChange(evt) {\r\n    var value = parseInt(evt.target.value);\r\n\r\n    var configCopy = this.state.postConfig;\r\n    configCopy.build_interval = value;\r\n\r\n    this.setState({\r\n      postConfig: configCopy,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { config, isLoaded } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return isLoaded ? (\r\n      <div className=\"Settings\">\r\n        <Nav />\r\n        <form\r\n          className={classes.Form}\r\n          noValidate\r\n          autoComplete=\"off\"\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <Typography variant=\"h3\">Google Credentials</Typography>\r\n          <TextField\r\n            className=\"TextField\"\r\n            id=\"access_token\"\r\n            label=\"Access Token\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            value={this.state.postConfig.access_token}\r\n            onChange={this.handleAccessTokenChange}\r\n            required\r\n          />\r\n          <TextField\r\n            className=\"TextField\"\r\n            id=\"client_id\"\r\n            label=\"Client ID\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            value={this.state.postConfig.client_id}\r\n            onChange={this.handleClientIDChange}\r\n            required\r\n          />\r\n          <TextField\r\n            className=\"TextField\"\r\n            id=\"client_secret\"\r\n            label=\"Client Secret\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            value={this.state.postConfig.client_secret}\r\n            onChange={this.handleClientSecretChange}\r\n            required\r\n          />\r\n          <TextField\r\n            className=\"TextField\"\r\n            id=\"refresh_token\"\r\n            label=\"Refresh Token\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            value={this.state.postConfig.refresh_token}\r\n            onChange={this.handleRefreshTokenChange}\r\n            required\r\n          />\r\n          <TextField\r\n            className=\"TextField\"\r\n            id=\"token_expiry\"\r\n            label=\"Token Expiry\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            value={this.state.postConfig.token_expiry}\r\n            disabled\r\n          />\r\n          <br />\r\n          <Typography variant=\"h3\">Categories</Typography>\r\n          {config.category_list.length\r\n            ? config.category_list.map((category, n) => (\r\n                <div style={{ margin: \"30px\" }}>\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`category-type_${n}`}\r\n                    select\r\n                    label=\"Select Type\"\r\n                    variant=\"outlined\"\r\n                    value={`${this.state.postConfig.category_list[n].type}_${n}`}\r\n                    onChange={this.handleCategoryTypeChange}\r\n                  >\r\n                    <MenuItem key={uuid()} value={`Movies_${n}`}>\r\n                      Movies\r\n                    </MenuItem>\r\n                    <MenuItem key={uuid()} value={`TV Shows_${n}`}>\r\n                      TV Shows\r\n                    </MenuItem>\r\n                  </TextField>\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`category-name_${n}`}\r\n                    label=\"Name\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.category_list[n].name}\r\n                    onChange={this.handleCategoryNameChange}\r\n                    required\r\n                  />\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`category-id_${n}`}\r\n                    label=\"Folder ID\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.category_list[n].id}\r\n                    onChange={this.handleCategoryIdChange}\r\n                    required\r\n                  />\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`category-driveId_${n}`}\r\n                    label=\"Team Drive ID\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.category_list[n].driveId}\r\n                    onChange={this.handleCategoryDriveIdChange}\r\n                    required\r\n                  />\r\n                  <br />\r\n                  <IconButton\r\n                    aria-label=\"remove\"\r\n                    id={`category-remove_${n}`}\r\n                    onClick={this.handleRemoveCategory}\r\n                  >\r\n                    <RemoveCircleOutlineIcon id={`category-remove_${n}`} />\r\n                  </IconButton>\r\n                </div>\r\n              ))\r\n            : null}\r\n          <IconButton aria-label=\"add\" onClick={this.handleAddCategory}>\r\n            <AddCircleOutlineIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h3\">Accounts</Typography>\r\n          {config.account_list.length\r\n            ? config.account_list.map((account, n) => (\r\n                <div style={{ margin: \"30px\" }}>\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`account-username_${n}`}\r\n                    label=\"Username\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.account_list[n].username}\r\n                    onChange={this.handleAccountUsernameChange}\r\n                    required\r\n                  />\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`account-password_${n}`}\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.account_list[n].password}\r\n                    onChange={this.handleAccountPasswordChange}\r\n                    required\r\n                  />\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`account-pic_${n}`}\r\n                    label=\"Picture\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.account_list[n].pic}\r\n                    onChange={this.handleAccountPicChange}\r\n                  />\r\n                  <TextField\r\n                    className=\"TextField\"\r\n                    id={`account-auth_${n}`}\r\n                    label=\"Auth\"\r\n                    variant=\"outlined\"\r\n                    value={this.state.postConfig.account_list[n].auth}\r\n                    disabled\r\n                  />\r\n                  <br />\r\n                  <IconButton\r\n                    aria-label=\"remove\"\r\n                    id={`account-remove_${n}`}\r\n                    onClick={this.handleRemoveAccount}\r\n                  >\r\n                    <RemoveCircleOutlineIcon id={`account-remove_${n}`} />\r\n                  </IconButton>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                      marginTop: \"20px\",\r\n                    }}\r\n                  >\r\n                    {\r\n                      <img\r\n                        src={config.account_list[n].pic}\r\n                        width=\"64px\"\r\n                        alt=\"profile-pic\"\r\n                      />\r\n                    }\r\n                  </div>\r\n                </div>\r\n              ))\r\n            : null}\r\n          <IconButton aria-label=\"add\" onClick={this.handleAddAccount}>\r\n            <AddCircleOutlineIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h3\">Extras</Typography>\r\n          <div style={{ margin: \"30px\" }}>\r\n            <TextField\r\n              className=\"TextField\"\r\n              id=\"secret_key\"\r\n              label=\"Secret Key\"\r\n              type=\"password\"\r\n              variant=\"outlined\"\r\n              value={this.state.postConfig.secret_key}\r\n              onChange={this.handleSecretChange}\r\n              required\r\n            />\r\n            <TextField\r\n              className=\"TextField\"\r\n              id=\"tmbd_api_key\"\r\n              label=\"TMDB API Key\"\r\n              type=\"text\"\r\n              variant=\"outlined\"\r\n              value={this.state.postConfig.tmdb_api_key}\r\n              onChange={this.handleTMDBAPIKeyChange}\r\n              required\r\n            />\r\n            <TextField\r\n              className=\"TextField\"\r\n              id=\"cloudflare\"\r\n              label=\"Cloudflare\"\r\n              type=\"text\"\r\n              variant=\"outlined\"\r\n              value={this.state.postConfig.cloudflare}\r\n              onChange={this.handleCloudflareChange}\r\n              required\r\n            />\r\n            <TextField\r\n              className=\"TextField\"\r\n              id=\"build_interval\"\r\n              label=\"Build Interval\"\r\n              type=\"number\"\r\n              variant=\"outlined\"\r\n              value={this.state.postConfig.build_interval}\r\n              onChange={this.handleBuildIntervalChange}\r\n              required\r\n            />\r\n          </div>\r\n          <br />\r\n          <div style={{ margin: \"30px\" }}>\r\n            <Button\r\n              style={{ marginRight: \"20px\" }}\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              className={classes.submit}\r\n              target=\"_blank\"\r\n              href=\"https://libdrive-config.netlify.app/\"\r\n            >\r\n              Create Config\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n            >\r\n              Submit\r\n            </Button>\r\n            <Button\r\n              style={{ marginLeft: \"20px\" }}\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              className={classes.submit}\r\n              onClick={this.handleRestart}\r\n            >\r\n              Restart\r\n            </Button>\r\n          </div>\r\n        </form>\r\n        <Footer />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Settings);\r\n","import React, { Component } from \"react\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Container,\r\n  CssBaseline,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { Nav } from \"../../components\";\r\n\r\nconst styles = (theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n});\r\n\r\nclass SettingsLoginForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      error: \"\",\r\n      secret: \"\",\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n    };\r\n\r\n    this.handleSecretChange = this.handleSecretChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.dismissError = this.dismissError.bind(this);\r\n  }\r\n\r\n  dismissError() {\r\n    this.setState({ error: \"\" });\r\n  }\r\n\r\n  handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    let { secret, server } = this.state;\r\n\r\n    if (!secret) {\r\n      return this.setState({ error: \"Secret is required\" });\r\n    }\r\n\r\n    axios\r\n      .get(`${server}/api/v1/config?secret=${secret}`)\r\n      .then((response) => {\r\n        sessionStorage.setItem(\"secret\", secret);\r\n        this.props.history.push(\"/settings\");\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"OK\",\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"OK\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text:\r\n              \"libDrive could not communicate with the backend. Is ${server} the correct address?\",\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDenied) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    return this.setState({ error: \"\" });\r\n  }\r\n\r\n  handleSecretChange(evt) {\r\n    this.setState({\r\n      secret: evt.target.value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let { error, secret } = this.state;\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"SettingsLoginForm\">\r\n        <Nav />\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n          <CssBaseline />\r\n          <div className={classes.paper}>\r\n            <Avatar className={classes.avatar}>\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Settings Login\r\n            </Typography>\r\n            <form\r\n              className={classes.form}\r\n              onSubmit={this.handleSubmit}\r\n              noValidate\r\n            >\r\n              {error && (\r\n                <div style={{}}>\r\n                  <h3 data-test=\"error\" onClick={this.dismissError}>\r\n                    <button onClick={this.dismissError}>✖</button>\r\n                    {error}\r\n                  </h3>\r\n                </div>\r\n              )}\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                fullWidth\r\n                id=\"secret\"\r\n                label=\"Secret\"\r\n                name=\"secret\"\r\n                type=\"password\"\r\n                autoComplete=\"secret\"\r\n                onChange={this.handleSecretChange}\r\n                value={secret}\r\n                required\r\n                autoFocus\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n              >\r\n                Sign In\r\n              </Button>\r\n            </form>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(SettingsLoginForm);\r\n","export default function uuidv4() {\r\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\r\n    (\r\n      c ^\r\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\r\n    ).toString(16)\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { Button, Divider, Menu, MenuItem, Typography } from \"@material-ui/core\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\n\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Swal from \"sweetalert2/src/sweetalert2.js\";\r\nimport \"@sweetalert2/theme-dark/dark.css\";\r\n\r\nimport Plyr from \"plyr-react\";\r\nimport \"plyr-react/dist/plyr.css\";\r\n\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\n\r\nimport { Footer, Nav, uuid } from \"../../components\";\r\nimport \"./View.css\";\r\n\r\nexport default class View extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      server:\r\n        sessionStorage.getItem(\"server\") || localStorage.getItem(\"server\"),\r\n      auth: sessionStorage.getItem(\"auth\") || localStorage.getItem(\"auth\"),\r\n      id: this.props.match.params.id,\r\n      isLoaded: false,\r\n      loadedTime: new Date(),\r\n      metadata: {},\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let { auth, id, server } = this.state;\r\n    let url = `${server}/api/v1/metadata?a=${auth}&id=${id}`;\r\n\r\n    axios\r\n      .get(url)\r\n      .then((response) => {\r\n        this.setState({\r\n          metadata: response.data,\r\n          isLoaded: true,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        if (auth == null || server == null) {\r\n          this.props.history.push(\"/login\");\r\n        } else if (error.response) {\r\n          if (error.response.status === 401) {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text: \"Your credentials are invalid!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              }\r\n            });\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Error!\",\r\n              text:\r\n                \"Something went wrong while communicating with the backend!\",\r\n              icon: \"error\",\r\n              confirmButtonText: \"Logout\",\r\n              cancelButtonText: \"Retry\",\r\n              showCancelButton: true,\r\n            }).then((result) => {\r\n              if (result.isConfirmed) {\r\n                this.props.history.push(\"/logout\");\r\n              } else if (result.isDenied) {\r\n                location.reload();\r\n              }\r\n            });\r\n          }\r\n        } else if (error.request) {\r\n          Swal.fire({\r\n            title: \"Error!\",\r\n            text: `libDrive could not communicate with the backend! Is ${server} the correct address?`,\r\n            icon: \"error\",\r\n            confirmButtonText: \"Logout\",\r\n            cancelButtonText: \"Retry\",\r\n            showCancelButton: true,\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.props.history.push(\"/logout\");\r\n            } else if (result.isDismissed) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let { loadedTime, metadata } = this.state;\r\n\r\n    const exitTime = new Date();\r\n    const diffTime = Math.abs(exitTime - loadedTime);\r\n    let watchList =\r\n      JSON.parse(localStorage.getItem(\"watchList\")) ||\r\n      JSON.parse(sessionStorage.getItem(\"watchList\")) ||\r\n      [];\r\n    if (diffTime > 180000) {\r\n      watchList.push(metadata);\r\n      while (watchList.length > 8) {\r\n        watchList.shift();\r\n      }\r\n      localStorage.setItem(\"watchList\", JSON.stringify(watchList));\r\n      sessionStorage.setItem(\"watchList\", JSON.stringify(watchList));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { isLoaded, metadata } = this.state;\r\n    let state = this.state;\r\n    state[\"thisprops\"] = this.props;\r\n\r\n    return isLoaded && metadata.type == \"file\" ? (\r\n      <div className=\"View\">\r\n        <Nav />\r\n        <MovieView props={state} />\r\n        <Footer />\r\n      </div>\r\n    ) : isLoaded && metadata.type == \"directory\" && metadata.title ? (\r\n      <div className=\"View\">\r\n        <Nav />\r\n        <TVBView props={state} />\r\n        <Footer />\r\n      </div>\r\n    ) : isLoaded && metadata.type == \"directory\" ? (\r\n      <div className=\"View\">\r\n        <Nav />\r\n        <TVSView props={state} />\r\n        <Footer />\r\n      </div>\r\n    ) : (\r\n      <div className=\"Loading\">\r\n        <ClipLoader color=\"#4197fe\" size={75} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport function MovieView(props) {\r\n  let { auth, id, metadata, server } = props.props;\r\n\r\n  return (\r\n    <div className=\"MovieView\">\r\n      <div className=\"plyr__component\">\r\n        <Plyr\r\n          source={{\r\n            type: \"video\",\r\n            poster:\r\n              `https://drive.google.com/thumbnail?sz=w1920&id=${metadata.id}` ||\r\n              \"\",\r\n            sources: [\r\n              {\r\n                src: `${server}/api/v1/redirectdownload/${metadata.name}?a=${auth}&id=${id}`,\r\n              },\r\n            ],\r\n          }}\r\n          options={{\r\n            controls: [\r\n              \"play\",\r\n              \"progress\",\r\n              \"current-time\",\r\n              \"duration\",\r\n              \"mute\",\r\n              \"volume\",\r\n              \"pip\",\r\n              \"fullscreen\",\r\n            ],\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"info__container\">\r\n        <div className=\"info__left\">\r\n          <img className=\"info__poster\" src={metadata.posterPath} />\r\n        </div>\r\n        <div className=\"info__right\">\r\n          <Typography variant=\"h2\" className=\"info__title\">\r\n            {metadata.title}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body1\"\r\n            className=\"info__overview\"\r\n            style={{ marginTop: \"30px\" }}\r\n          >\r\n            {metadata.overview}\r\n          </Typography>\r\n          <div className=\"vote__container\">\r\n            <Rating\r\n              name=\"Rating\"\r\n              value={metadata.voteAverage}\r\n              max={10}\r\n              readOnly\r\n            />\r\n          </div>\r\n          <PlayerMenu props={props.props} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TVBView(props) {\r\n  let { metadata } = props.props;\r\n\r\n  return (\r\n    <div className=\"TVBView\">\r\n      <div className=\"info__container\">\r\n        <div className=\"info__left\">\r\n          <img className=\"info__poster\" src={metadata.posterPath} />\r\n        </div>\r\n        <div className=\"info__right\">\r\n          <Typography variant=\"h2\" className=\"info__title\">\r\n            {metadata.title}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body1\"\r\n            className=\"info__overview\"\r\n            style={{ marginTop: \"30px\" }}\r\n          >\r\n            {metadata.overview}\r\n          </Typography>\r\n          <div className=\"vote__container\">\r\n            <Rating\r\n              name=\"Rating\"\r\n              value={metadata.voteAverage}\r\n              max={10}\r\n              readOnly\r\n            />\r\n          </div>\r\n          <div className=\"buttons__container\">\r\n            <div className=\"button\">\r\n              <ChildrenMenu props={props.props} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TVSView(props) {\r\n  let { auth, id, metadata, server, thisprops } = props.props;\r\n  let hash = parseInt(queryString.parse(thisprops.location.search).q) || 0;\r\n\r\n  function isHash(n, hash) {\r\n    if (n === hash) {\r\n      return \"pls-playing\";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"TVSView\">\r\n      <Typography\r\n        variant=\"h2\"\r\n        style={{ textAlign: \"center\", marginTop: \"25px\" }}\r\n      >\r\n        {metadata.name}\r\n      </Typography>\r\n      <Typography\r\n        variant=\"h5\"\r\n        style={{ textAlign: \"center\", marginTop: \"15px\" }}\r\n      >\r\n        {metadata.children[hash].name}\r\n      </Typography>\r\n      <div className=\"plyr__component\">\r\n        <Plyr\r\n          source={{\r\n            type: \"video\",\r\n            poster:\r\n              `https://drive.google.com/thumbnail?sz=w1920&id=${metadata.children[hash].id}` ||\r\n              \"\",\r\n            sources: [\r\n              {\r\n                src: `${server}/api/v1/redirectdownload/${metadata.children[hash].name}?a=${auth}&id=${metadata.children[hash].id}`,\r\n              },\r\n            ],\r\n          }}\r\n          options={{\r\n            controls: [\r\n              \"play\",\r\n              \"progress\",\r\n              \"current-time\",\r\n              \"duration\",\r\n              \"mute\",\r\n              \"volume\",\r\n              \"pip\",\r\n              \"fullscreen\",\r\n            ],\r\n          }}\r\n        />\r\n        <div class=\"plyr-playlist-wrapper\">\r\n          <ul class=\"plyr-playlist\">\r\n            {metadata.children.length\r\n              ? metadata.children.map((child, n) => (\r\n                  <li className={isHash(n, hash)}>\r\n                    <Link\r\n                      to={{\r\n                        pathname: thisprops.location.pathname,\r\n                        search: `?q=${n}`,\r\n                      }}\r\n                      key={uuid()}\r\n                    >\r\n                      <img class=\"plyr-miniposter\" />\r\n                      {child.name}\r\n                    </Link>\r\n                  </li>\r\n                ))\r\n              : null}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div style={{ textAlign: \"center\", marginBottom: \"5vh\" }}>\r\n        <PlayerMenu\r\n          props={{\r\n            auth: auth,\r\n            id: metadata.children[hash].id,\r\n            metadata: metadata.children[hash],\r\n            server: server,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PlayerMenu(props) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  let { auth, id, metadata, server } = props.props;\r\n\r\n  return (\r\n    <div className=\"PlayerMenu\" style={{ marginTop: \"30px\" }}>\r\n      <Button\r\n        aria-controls=\"player-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n      >\r\n        External Player\r\n      </Button>\r\n      <Menu\r\n        id=\"player-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <a\r\n          href={`vlc://${server}/api/v1/redirectdownload/${metadata.name}?a=${auth}&id=${id}`}\r\n          className=\"no_decoration_link\"\r\n        >\r\n          <MenuItem onClick={handleClose}>VLC</MenuItem>\r\n        </a>\r\n        <a\r\n          href={`potplayer://${server}/api/v1/redirectdownload/${metadata.name}?a=${auth}&id=${id}`}\r\n          className=\"no_decoration_link\"\r\n        >\r\n          <MenuItem onClick={handleClose}>PotPlayer</MenuItem>\r\n        </a>\r\n        <Divider />\r\n        <MenuItem\r\n          onClick={() => {\r\n            navigator.clipboard.writeText(\r\n              `${server}/api/v1/redirectdownload/${metadata.name}?a=${auth}&id=${id}`\r\n            );\r\n            setMenuAnchorEl(null);\r\n          }}\r\n        >\r\n          Copy\r\n        </MenuItem>\r\n        <a\r\n          href={`${server}/api/v1/redirectdownload/${metadata.name}?a=${auth}&id=${id}`}\r\n          className=\"no_decoration_link\"\r\n        >\r\n          <MenuItem onClick={handleClose}>Download</MenuItem>\r\n        </a>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ChildrenMenu(props) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  let { metadata } = props.props;\r\n\r\n  return (\r\n    <div className=\"ChildrenMenu\" style={{ marginTop: \"30px\" }}>\r\n      <Button\r\n        aria-controls=\"children-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClick}\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n      >\r\n        Seasons\r\n      </Button>\r\n      <Menu\r\n        id=\"children-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"left\" }}\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        {metadata.children.length\r\n          ? metadata.children.map((child) => (\r\n              <Link\r\n                to={`/view/${child.id}`}\r\n                className=\"no_decoration_link\"\r\n                key={uuid()}\r\n              >\r\n                <MenuItem onClick={handleClose}>{child.name}</MenuItem>\r\n              </Link>\r\n            ))\r\n          : null}\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\n\r\nimport { CssBaseline } from \"@material-ui/core\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  App,\r\n  Browse,\r\n  CategoryBrowse,\r\n  Login,\r\n  Logout,\r\n  Search,\r\n  Settings,\r\n  SettingsLoginForm,\r\n  theme,\r\n  uuid,\r\n  View,\r\n} from \"./components\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <HashRouter>\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Route\r\n        exact\r\n        path={\"/\"}\r\n        render={(props) => <App key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/browse\"}\r\n        render={(props) => <Browse key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/browse/:category\"}\r\n        render={(props) => <CategoryBrowse key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/login\"}\r\n        render={(props) => <Login key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/logout\"}\r\n        render={(props) => <Logout key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/search/:q\"}\r\n        render={(props) => <Search key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/settings\"}\r\n        render={(props) => <Settings key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/settings/login\"}\r\n        render={(props) => <SettingsLoginForm key={uuid()} {...props} />}\r\n      />\r\n      <Route\r\n        exact\r\n        path={\"/view/:id\"}\r\n        render={(props) => <View key={uuid()} {...props} />}\r\n      />\r\n    </ThemeProvider>\r\n  </HashRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}